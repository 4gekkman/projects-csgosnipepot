# M7 - This package allow to save images the way you want.
---
## Оглавление

  - [Ссылки](#link1)
  - [Введение](#link2)
  - [Общее описание работы пакета](#link3)
  -
	- [Функционал](#link98)
	- [Схемы взаимодействий с другими пакетами](#link99)
  - [Заметки к релизам](#link100)

---

## Ссылки <a id="link1"></a>
```

  > Адрес репозитория пакета M7 на github
      https://github.com/4gekkman/m7

	
			
```

## Введение <a id="link2"></a>
```

  ● Это M-пакет для сохранения загружаемых изображений в папку "public" проекта.
  ● Основные задачи пакета:
    1) Сохранять изображения в папку "public" проекта нужным образом.
    2) Обрабатывать уже сохранённые в папке "public"

 
```

## Общее описание работы пакета <a id="link3"></a>
```

-------------------------
Оглавление

  # Как отдавать изображения
  #

-------------------------

> Как отдавать изображения
  - В конфиге NGINX вручную прописывается путь к папке с изображениями.
  - И NGINX (без захода в php) отдаёт эти изображения.

>





Путь к каталогу относ.public
Размеры
Типы
Качество





> В конфиге можно указывать группы настроек.

> При сохранении можно указать 2 параметра:
  - Следующие:
    1) Имя группы настроек из конфига.
    2) Массив с настройками.
  - Если первый не пуст и такая группа есть, используются эти настройки.
  - В противном случае, используются настройки из массива.
  - Если массив тоже пуст, используются настройки по умолчанию.
  - Массив не обязан содержать все настройки, а может только некоторые.
    Тогда соотв.параметры по умолчанию будут перезаписаны ими.
  - По умолчанию сохраняется изображение оригинальных размеров и типа,
    с оригинальным именем

> Какие параметры сохранения должны быть

  - Путь к каталогу относ.public, куда сохранять.
  - Массив с размерами изображения
    - Каждый элемент массива содержит подмассив с:
      • Ширина
      • Высота
    - Если изменить размеры нельзя, сохраняется оригинал.
  - Массив с типами изображения (jpg, gif, png).
  - Массив с качеством изображения (от 1 до 100).
  - Массив имён фильтров, которые надо применить к изображениям при сохранении.
  - Флаг сохранять ли изображения оригинального размера.
  - Флаг сохранять ли не прошедшие фильтры изображения.

> Как отдаются изображения
  - В конфиге NGINX вручную прописывается путь к папке с изображениями.
  - И NGINX (без захода в php) отдаёт эти изображения.

> Как сохраняются изображения
  - Для каждого изображения выделяется отдельная папочка.
  - Имя папочки

> Как формируется имя изображения, и структура папки изображения
  - Оригинальное имя изображения не используется.
  - Вместо этого используется цифровой автоинкремент.
  - Он вычисляется на основе имён папок с изображениями в конечной папке сохранения.
  - Вот структура папкок:

    /public
      /avatars
        /1
          /original
            original.jpg
          /modified
            1.gif
            1.png
            1_1000x1000.gif
            1_1000x1000.png
        /2
          /original
          /modified
      /things
        /1
          /original
          /modified
        /2
          /original
          /modified


/public
  /avatars
    /1
      original.jpg
      original.png
      original_.png
      500x500.jpg
      500x500.png
      1000x1000.jpg
      1000x1000.png




```

## Функционал <a id="link98"></a>
```

  # Команды и к.команды общего назначения #
  #---------------------------------------#

    Команда                 К.Команда                   Описание
    ----------------------------------------------------------------------------------------------------------------------
    command                 | m1:command                | Description of the command


```
## Схемы взаимодействий с другими пакетами <a id="link99"></a>
```

  # Pull-взаимодействия (по инициативе этого пакета) #
  #--------------------------------------------------#

    ---------------------------------------------------------------------------------------------
    Пакет     Команда     К.Команда     Обработчик      Событие           Комментарий
    ---------------------------------------------------------------------------------------------

      -

  # Push-взаимодействия (по инициативе других пакетов) #
  #----------------------------------------------------#

    ---------------------------------------------------------------------------------------------
    Пакет     Команда     К.Команда     Обработчик      Событие           Комментарий
    ---------------------------------------------------------------------------------------------

      -


```
## Заметки к релизам <a id="link100"></a>
```

  1.0.0
    - Первый релиз.

```










