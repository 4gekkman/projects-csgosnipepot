# M8 - Steam bots and trade operations automate
---
## Оглавление

  - [Ссылки](#link1)
  - [Введение](#link2)
  - [Теоретическая база](#link3)
	- [Функционал](#link98)
	- [Схемы взаимодействий с другими пакетами](#link99)
  - [Заметки к релизам](#link100)

---

## Ссылки <a id="link1"></a>
```

  > Адрес репозитория пакета M8 на github
      https://github.com/4gekkman/m8


```

## Введение <a id="link2"></a>
```

  > Каково назначение этого M-пакета?
    - Управление Steam-ботами.
    - Автоматизация торговых операций в Steam.

  > Пакет работает в связке с M5
    - Пакет M5 предназначен для управления пользователями и правами.
    - Steam-ботами могут быть любые зарегистрированные там Steam-пользователи.
    - Без пакета M5 пакет M8 не может функционировать, т.е. является зависимым.
    - Эта зависимость проявляется в транс-пакетной их связи, определённой в БД M8.
 
 
```

## Теоретическая база <a id="link3"></a>
```

-----------------------------------
Оглавление

  # Ссылки
  # Введение

  # Боты: общая информация
  # Боты: мобильный аутентификатор и коды
  # Боты: кто может стать ботом
  # Боты: дополнительные свойства
  # Боты: транспакетные связи с M5
  # Боты: алгоритм извлечения из БД

  # Интерфейсы: список ботов
  # Интерфейсы: свойства ботов
  # Интерфейсы: инвентарь ботов
  # Интерфейсы: кнопка обновления инвентаря выбранного бота, галочка "автообновление каждые N секунд"
  # Интерфейсы: выбор в инвентаре и отправка по торговому URL торгового предложения
  # Интерфейсы: все торговые предложения ботов
  # Интерфейсы: свойства торговых предложение (в т.ч. списки вещей для обмена)
  # Интерфейсы: типы торговых предложений
  # Интерфейсы: возможность принять/отклонить присланные ТП, отменить отправленные ТП
  # Интерфейсы: кнопка обновления ТП, галочка "автообновление каждые N секунд"

-----------------------------------

> Ссылки

  #

> Введение
  - Это теоретическая база пакета M8.
  - Здесь дана полная цельная картина его работы в мелком масштабе.
  - А также рассмотрены подробнее все наиболее важные части этой картины.

> Боты: общая информация
  - Бот, это аккаунт в Steam, управляемый сторонним приложением.
  - Логика управления ботом может быть заложена в приложении абсолютно любая.
  - Например, от имени бота могут отправляться/приниматься торговые предложения.

> Боты: мобильный аутентификатор и коды

  • Общая информация о МА
    - Для входа в аккаунт и совершения многих операций требуется подтверждение.
    - Подтверждение осуществляется через мобильный аутентификатор Steam.
    - На основе заложенного алгоритма МА генерирует короткие коды подтверждения.
    - МА был декомпилирован, алгоритм был извлечён и опубликован публично.
    - Как следствие, алгоритм с успехом используется сторонними приложениями.
    - Для использования алгоритма необходимо извлечь кое-какие данные из смартфона.
    - Эти данные содержатся в файле вида "Steamguard-<steamid>" в смартфоне.

  • Чтобы стороннее приложение могло генерировать коды МА, нужны следующие данные

      {
        "shared_secret":    "",
        "serial_number":    "",
        "revocation_code":  "",
        "uri":              "",
        "server_time":      "",
        "account_name":     "",
        "token_gid":        "",
        "identity_secret":  "",
        "secret_1":         "",
      }

  • Как извлечь из смартфона на Android файл "Steamguard-<steamid>"

    ▪ Подготовь свой телефон для извлечения из него необходимых данных

      ▪ Получи root-права на android/ios на своём телефоне
        - Как это сделать, находится за пределами темы этой методички.

      ▪ Включи root-права на android/ios
        - Здесь описано, как включить для Android.
        - Зайди в настройки, кликни 7 раз по "About phone".
        - Поднимись на уровень выше, зайди в настройки разработчика.
        - Включи там root-права для всех приложений.

      ▪ Скачай какой-нибудь root-проводник из магазина
        - Например, для android: "root browser".

    ▪ Перекачай с телефона на компьютер файл с данными Steam
      - Открой свой root-браузер в телефоне.
      - Перейди в следующий каталог:

        /data/data/com.valvesoftware.android.steam.community/files

      - Перекачай оттуда файл "Steamguard-<Your Steam64 ID>" на SD карту.
      - Подключи телефон через USB к компьютеру, и скачай файл на компьютер.

    ▪ Узнай Device ID своего телефона

      ▪ Скачай и установи из магазина приложение "Device ID"
      ▪ Открой его и посмотри в нём "Android Device ID".
        Например: "0900DBSDF907DSGD"
      ▪ Сформируй из него строку в формате: "android:<deviceID>".
      ▪ Итоговая строка и будет искомым deviceid.
        Например: "android:0900DBSDF907DSGD"

> Боты: кто может стать ботом
  - Steam-пользователь.
  - Который заходил в приложение через Steam.
  - Состоящий в группе Steam-пользователей, например, "SteamUsers" (имя группы можно указать в настроках M8).
  - Состоящий в группе Steam-ботов, например, "SteamBots" (имя группы можно указать в настроках M8).

> Боты: дополнительные свойства
  - В M8 есть отдельная таблица дополнительных свойств ботов.
  - Она должна содержать как минимум данные, перечисленные выше в:
    "Чтобы стороннее приложение могло генерировать коды МА, нужны следующие данные".
  - А также, вероятно, доп.св-ва, вроде: включён бот, или нет, и прочие.

> Боты: транспакетные связи с M5
  - Таблица доп.св-в ботов связана транспакетной связью с таблицей пользователей в M5.

> Боты: алгоритм извлечения из БД
  - Извлекается коллекция моделей из таблицы доп.свойств ботов.
  - Записи, связанные с пользователями из M5, состоящими в определённых группах.
  - А именно, в группах Steam-пользователей и Steam-ботов.
  - Потом модели ботов и доп.св-в объединяют между собой.

> Интерфейсы: список ботов
  - Таблица со списком ботов.
  - В таблице отображается много доп.информации.
  - Можно кликнуть по боту и перейти интерфейс рабоды с этим ботом.

> Интерфейсы: свойства ботов
  - Здесь дополнительные св-ва пользователя-бота, которые можно редактировать.

> Интерфейсы: инвентарь ботов
  - Просто выкачивается с сайта Steam.
  - Это происходит с помощью ajax-запроса к опред.команде.

> Интерфейсы: кнопка обновления инвентаря выбранного бота, галочка "автообновление каждые N секунд"
  - Можно обновить инвентарь бота, нажав кнопку.
  - Можно поставить галочку, обновлять каждые N секунд.

> Интерфейсы: выбор в инвентаре и отправка по торговому URL торгового предложения
  - Вещи в инвентаре должно быть можно выделять галочкой.
  - С выделенными вещами должно быть можно проводить операции.
  - Конкретно, одну операцию - отправку в виде торг.предложения по указанному URL.

> Интерфейсы: все торговые предложения ботов
  - Это таблица со списком торговых предложений.
  - Существует фильтр, позволяющий просматривать входящие/исходящие.

> Интерфейсы: свойства торговых предложение (в т.ч. списки вещей для обмена)
  - В свойства каждого ТП можно войти.
  - Там можно посмотреть некие общие параметры ТП.
  - А также увидеть списки вещей, предлагаемых для обмена.

> Интерфейсы: типы торговых предложений
  - У каждого ТП есть тип. Оно либо входящее, либо исходящее.

> Интерфейсы: возможность принять/отклонить присланные ТП, отменить отправленные ТП
  - Каждое ТП можно выделять галочкой.
  - С ТП можно производить различные операции.
  - Входящие можно принимать/отклонять, исходящие - отменять.

> Интерфейсы: кнопка обновления ТП, галочка "автообновление каждые N секунд"
  - Можно обновить торговые предложения бота, нажав кнопку.
  - Можно поставить галочку, обновлять каждые N секунд.


```

## Функционал <a id="link98"></a>
```

  # Команды и к.команды общего назначения #
  #---------------------------------------#

    Команда                 К.Команда                   Описание
    ----------------------------------------------------------------------------------------------------------------------
    command                 | m1:command                | Description of the command


```
## Схемы взаимодействий с другими пакетами <a id="link99"></a>
```

  # Pull-взаимодействия (по инициативе этого пакета) #
  #--------------------------------------------------#

    ---------------------------------------------------------------------------------------------
    Пакет     Команда     К.Команда     Обработчик      Событие           Комментарий
    ---------------------------------------------------------------------------------------------

      -

  # Push-взаимодействия (по инициативе других пакетов) #
  #----------------------------------------------------#

    ---------------------------------------------------------------------------------------------
    Пакет     Команда     К.Команда     Обработчик      Событие           Комментарий
    ---------------------------------------------------------------------------------------------

      -


```
## Заметки к релизам <a id="link100"></a>
```

  1.0.0
    - Первый релиз.

```










